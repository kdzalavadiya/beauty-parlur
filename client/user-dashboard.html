<!DOCTYPE html>
<html lang="en" data-theme="light" data-font-size="medium" data-high-contrast="false" data-reduce-motion="false" data-compact-view="false">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/user-dashboard.css">
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to content</a>

    <!-- Dashboard Layout Container -->
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">TravelEase</h1>
                <button class="toggle-sidebar" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <div class="sidebar-user">
                <div class="user-avatar">JS</div>
                <div class="user-info">
                    <h2 class="user-name">John Smith</h2>
                    <p class="user-role">Premium User</p>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li class="active">
                        <a href="#">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fas fa-calendar-alt"></i>
                            <span>My Bookings</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fas fa-heart"></i>
                            <span>Favorites</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fas fa-credit-card"></i>
                            <span>Payments</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fas fa-user-circle"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    <li class="nav-divider"></li>
                    <li>
                        <a href="#">
                            <i class="fas fa-question-circle"></i>
                            <span>Help & Support</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <span>Â© 2023 TravelEase</span>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="toggle-sidebar mobile-only" aria-label="Toggle sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="welcome-title">Welcome back, John Smith!</h1>
                </div>
                <div class="header-right">
                    <!-- Search -->
                    <div class="search-container">
                        <input type="search" placeholder="Search..." class="search-input" aria-label="Search">
                        <button class="search-button" aria-label="Perform search">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>

                    <!-- Notifications -->
                    <div class="notification-container">
                        <button class="notification-bell" aria-label="View notifications">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <div class="notifications-dropdown dropdown-menu">
                            <div class="dropdown-header">
                                <h3>Notifications</h3>
                                <button class="mark-all-read">Mark all as read</button>
                            </div>
                            <ul class="notification-list">
                                <li class="notification-item unread">
                                    <div class="notification-icon">
                                        <i class="fas fa-calendar-check"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">Booking Confirmed</div>
                                        <div class="notification-text">Your booking #12345 has been confirmed.</div>
                                        <div class="notification-time">2 hours ago</div>
                                    </div>
                                </li>
                                <li class="notification-item unread">
                                    <div class="notification-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">Payment Processed</div>
                                        <div class="notification-text">Your payment of $159.99 has been processed.</div>
                                        <div class="notification-time">1 day ago</div>
                                    </div>
                                </li>
                                <li class="notification-item unread">
                                    <div class="notification-icon">
                                        <i class="fas fa-bell"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">Special Offer</div>
                                        <div class="notification-text">20% off on your next booking!</div>
                                        <div class="notification-time">3 days ago</div>
                                    </div>
                                </li>
                                <li class="notification-item">
                                    <div class="notification-icon">
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">Account Update</div>
                                        <div class="notification-text">Your account has been upgraded to Premium.</div>
                                        <div class="notification-time">1 week ago</div>
                                    </div>
                                </li>
                            </ul>
                            <div class="dropdown-footer">
                                <a href="#">View all notifications</a>
                            </div>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div class="user-menu">
                        <button class="user-menu-toggle" aria-label="Open user menu">
                            <div class="user-menu-avatar">JS</div>
                            <span class="user-menu-name">John Smith</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="user-dropdown dropdown-menu">
                            <ul>
                                <li>
                                    <a href="#">
                                        <i class="fas fa-user"></i>
                                        <span>My Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="preferences-link">
                                        <i class="fas fa-sliders-h"></i>
                                        <span>Preferences</span>
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="#" class="logout-link">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>Logout</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- User overview metrics -->
                <section class="metrics-section">
                    <div class="section-header">
                        <h2>Your Overview</h2>
                    </div>
                    
                    <!-- Loading placeholder -->
                    <div id="user-data-loading" class="loading-placeholder">
                        <div class="spinner"></div>
                        <p>Loading your data...</p>
                    </div>
                    
                    <!-- Error placeholder -->
                    <div id="user-data-error" class="error-placeholder">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>Unable to load your data. Please try again.</p>
                        <button class="retry-button" data-retry="load-user-data">Retry</button>
                    </div>
                    
                    <div class="metrics-grid user-data-container" style="display: none;">
                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="metric-content">
                                <h3 class="metric-title">Total Bookings</h3>
                                <p class="metric-value" id="bookings-count">0</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="metric-content">
                                <h3 class="metric-title">Upcoming Bookings</h3>
                                <p class="metric-value" id="upcoming-bookings">0</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="metric-content">
                                <h3 class="metric-title">Saved Places</h3>
                                <p class="metric-value" id="favorites-count">0</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="metric-content">
                                <h3 class="metric-title">Membership</h3>
                                <p class="metric-value">Premium</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Charts and data visualizations -->
                <section class="charts-section">
                    <div class="section-header">
                        <h2>Your Activity</h2>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Booking Trends</h3>
                            </div>
                            
                            <!-- Loading placeholder -->
                            <div id="booking-chart-loading" class="loading-placeholder">
                                <div class="spinner"></div>
                                <p>Loading chart data...</p>
                            </div>
                            
                            <!-- Error placeholder -->
                            <div id="booking-chart-error" class="error-placeholder">
                                <i class="fas fa-exclamation-circle"></i>
                                <p>Unable to load chart data. Please try again.</p>
                                <button class="retry-button" data-retry="load-charts">Retry</button>
                            </div>
                            
                            <div class="chart-wrapper" style="display: none;">
                                <canvas id="booking-trends-chart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Payment Methods</h3>
                            </div>
                            <div class="chart-wrapper" style="display: none;">
                                <canvas id="payment-history-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Recent activity -->
                <section class="activity-section">
                    <div class="section-header">
                        <h2>Recent Activity</h2>
                    </div>
                    
                    <!-- Loading placeholder -->
                    <div id="activity-loading" class="loading-placeholder">
                        <div class="spinner"></div>
                        <p>Loading your activity...</p>
                    </div>
                    
                    <!-- Error placeholder -->
                    <div id="activity-error" class="error-placeholder">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>Unable to load your activity. Please try again.</p>
                        <button class="retry-button" data-retry="load-activity">Retry</button>
                    </div>
                    
                    <div class="activity-container" style="display: none;">
                        <ul class="activity-list">
                            <!-- Activity items will be dynamically populated -->
                        </ul>
                        <div class="activity-footer">
                            <a href="#" class="view-all-link">View all activity</a>
                        </div>
                    </div>
                </section>

                <!-- Recommended destinations -->
                <section class="recommendations-section">
                    <div class="section-header">
                        <h2>Recommended for You</h2>
                    </div>
                    <div class="recommendations-grid">
                        <div class="recommendation-card">
                            <div class="recommendation-image">
                                <img src="https://images.unsplash.com/photo-1569288063643-5d9841b51ff4" alt="Paris, France">
                                <div class="recommendation-badge">Popular</div>
                            </div>
                            <div class="recommendation-content">
                                <h3>Paris, France</h3>
                                <div class="recommendation-rating">
                                    <div class="stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span>4.5</span>
                                </div>
                                <p>Experience the charm of the City of Lights</p>
                                <div class="recommendation-price">
                                    <span class="price">$399</span>
                                    <span class="unit">/ per night</span>
                                </div>
                                <button class="btn primary-button">View Details</button>
                            </div>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-image">
                                <img src="https://images.unsplash.com/photo-1589304038421-449708a42983" alt="Bali, Indonesia">
                                <div class="recommendation-badge">20% Off</div>
                            </div>
                            <div class="recommendation-content">
                                <h3>Bali, Indonesia</h3>
                                <div class="recommendation-rating">
                                    <div class="stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span>4.9</span>
                                </div>
                                <p>Tropical paradise with stunning beaches</p>
                                <div class="recommendation-price">
                                    <span class="price">$299</span>
                                    <span class="unit">/ per night</span>
                                </div>
                                <button class="btn primary-button">View Details</button>
                            </div>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-image">
                                <img src="https://images.unsplash.com/photo-1579282240050-352db0a14c21" alt="New York, USA">
                            </div>
                            <div class="recommendation-content">
                                <h3>New York, USA</h3>
                                <div class="recommendation-rating">
                                    <div class="stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span>4.0</span>
                                </div>
                                <p>The city that never sleeps</p>
                                <div class="recommendation-price">
                                    <span class="price">$599</span>
                                    <span class="unit">/ per night</span>
                                </div>
                                <button class="btn primary-button">View Details</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Footer -->
            <footer class="dashboard-footer">
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Contact Us</a>
                </div>
                <div class="footer-copyright">
                    <p>&copy; 2023 TravelEase. All rights reserved.</p>
                </div>
            </footer>
        </main>
    </div>

    <!-- Preferences Panel (initially hidden) -->
    <div class="preferences-panel">
        <div class="preferences-header">
            <h2>Dashboard Preferences</h2>
            <button class="close-preferences" aria-label="Close preferences panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="preferences-content">
            <form id="preferences-form">
                <div class="preference-group">
                    <h3>Appearance</h3>
                    <div class="preference-item">
                        <label for="theme-preference">Theme</label>
                        <select id="theme-preference" class="form-control">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="system">System Default</option>
                        </select>
                    </div>
                    <div class="preference-item">
                        <label for="font-size-preference">Font Size</label>
                        <select id="font-size-preference" class="form-control">
                            <option value="small">Small</option>
                            <option value="medium">Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                    <div class="preference-item">
                        <label for="high-contrast-toggle">High Contrast</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="high-contrast-toggle" class="toggle-input">
                            <label for="high-contrast-toggle" class="toggle-label"></label>
                        </div>
                    </div>
                    <div class="preference-item">
                        <label for="reduce-motion-toggle">Reduce Motion</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="reduce-motion-toggle" class="toggle-input">
                            <label for="reduce-motion-toggle" class="toggle-label"></label>
                        </div>
                    </div>
                    <div class="preference-item">
                        <label for="compact-view-toggle">Compact View</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="compact-view-toggle" class="toggle-input">
                            <label for="compact-view-toggle" class="toggle-label"></label>
                        </div>
                    </div>
                </div>
                <div class="preference-group">
                    <h3>Notifications</h3>
                    <div class="preference-item">
                        <label for="email-notifications-toggle">Email Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="email-notifications-toggle" class="toggle-input" checked>
                            <label for="email-notifications-toggle" class="toggle-label"></label>
                        </div>
                    </div>
                    <div class="preference-item">
                        <label for="browser-notifications-toggle">Browser Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="browser-notifications-toggle" class="toggle-input" checked>
                            <label for="browser-notifications-toggle" class="toggle-label"></label>
                        </div>
                        <button id="enable-notifications-btn" class="btn secondary-button">Enable</button>
                    </div>
                    <div class="preference-item">
                        <label for="sound-notifications-toggle">Sound Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="sound-notifications-toggle" class="toggle-input" checked>
                            <label for="sound-notifications-toggle" class="toggle-label"></label>
                        </div>
                    </div>
                </div>
                <div class="preferences-actions">
                    <button type="button" id="reset-preferences" class="btn secondary-button">Reset to Default</button>
                    <button type="button" id="save-preferences" class="btn primary-button">Save Preferences</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container for Notifications -->
    <div class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/user-dashboard.js"></script>
</body>
</html>